<!DOCTYPE html>
<html>
  
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

.topnav {
  overflow: hidden;
  background-color: pink;
}

.topnav a {
  float: left;
  color: purple;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: purple;
  color: pink;
}

.topnav a.active {
  background-color: pink;
  color: black;
}

.footer {
  background-color: pink;
  color: black;
  text-align: center;
  padding: 20px 0;
  position: absolute;
  width: 100%;
  bottom: 0;
  overflow: hidden;
}
.footer a {
  color: black;
  margin: 0 15px;
  text-decoration: none;
}

.footer a:hover {
  color: purple;
}
.movie {
  display: flex;
  align-items: center;
  margin: 10px 0;
}
.movie img {
  width: 50px;
  height: 75px;
  object-fit: cover;
  margin-right: 10px;
}
.movie h4 {
  margin: 0;
}


</style>
</head>
<body>

<div class="topnav">
  <a href= "index.html">Home</a>
  <a href="create_blog.html">Blog</a>
  <a href="index.php">Sign in/log in</a>
  <a href="movieLists.html">add to your list</a>
  <a href="trivia.html">Trivia</a>
</div>

<div style="padding-left:16px">
  <h2>MovieMania</h2>
  <p>under construction</p>
</div>

<h1>Search Movies</h1>
  
<!-- Search Bar -->
<input type="text" id="searchInput" placeholder="Search for a movie...">
<button onclick="searchMovies()">Search</button>

<!-- Results Container -->
<div id="results"></div>

<script>
  async function searchMovies() {
    const query = document.getElementById('searchInput').value;

    // Send search request to the DMZ (which will route it via RabbitMQ)
    const response = await fetch('/dmz/search', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ query })
    });

    const movies = await response.json();
    const results = document.getElementById('results');
    results.innerHTML = ''; // Clear previous results

    // Check if any movies were found
    if (movies.length === 0) {
      results.innerHTML = '<p>No movies found.</p>';
      return;
    }

    // Display each movie
    movies.forEach(movie => {
      const movieItem = 
        <div class="movie">
          <img src="${movie.poster_url}" alt="${movie.title}">
          <h4>${movie.title}</h4>
        </div>
      ;
      results.insertAdjacentHTML('beforeend', movieItem);
    });
  }
</script>
</body>

<footer class="footer">
  <p>&copy; 2024 MovieMania. All rights reserved.</p>
  <p>
      <a href="">Terms and Conditions</a> | 
      <a href="">Privacy Policy</a> | 
      <a href="">Contact Us</a>
  </p>
</footer>

</html>